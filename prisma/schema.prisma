// prisma/schema.prisma

generator client {
    provider      = "prisma-client"
    output        = "../generated/prisma"
    moduleFormat  = "cjs"
}

datasource db {
    provider = "postgresql"
}

model Category {
    id          Int        @id @default(autoincrement())
    name        String     @db.VarChar(150)
    fullName    String?    @db.VarChar(250)
    slug        String     @unique @db.VarChar(250)
    description String?    @db.Text
    parentId    Int?

    sortOrder   Int?       @default(500)

    // self-relation (иерархия категорий)
    parent      Category?  @relation("CategoryHierarchy", fields: [parentId], references: [id])
    children    Category[] @relation("CategoryHierarchy")

    createdAt   DateTime   @default(now())
    updatedAt   DateTime   @updatedAt

    @@index([parentId])
}